var investAmountWrapper=document.querySelector(".invest-amount-wrapper"),investAmountInput=document.querySelector(".invest-amount"),investAmountCalc=document.querySelector(".invest-amount-calc"),bondsContainer=document.querySelector(".bonds-container"),bondItem=document.querySelector(".bond");function loader(){investAmountCalc.textContent="Finding available bonds...",bondsContainer.innerHTML='<div class="loader">Loading</div><div class="loader-wrapper"><div class="loader">Loading</div>'}function focusClassToggle(){investAmountWrapper.classList.toggle("invest-amount-wrapper--focus")}function currencyFormat(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function getBonds(){var n=new XMLHttpRequest;n.open("GET","http://165.227.229.49:8000/bonds?api_key=vNtV4nZsuMRL01sXVPzUtRnzf7L08B9O",!0),n.onload=function(){if(200==n.status){var t=JSON.parse(n.responseText).data,e=100*Number(investAmountInput.value);investAmountCalc.textContent="Re-calculate?",bondsContainer.innerHTML="";for(var s=0;s<t.length;s++){var r=Number(100*t[s].maturity_interest).toFixed(2),a=Number(100*t[s].quarterly_interest).toFixed(2),o=e+e*t[s].maturity_interest/12*t[s].duration_months,i=currencyFormat(Number(o/100).toFixed(2)),d=e+e*t[s].quarterly_interest/12*t[s].duration_months,u=currencyFormat(Number(d/100).toFixed(2));bondsContainer.innerHTML+=`<div class="bond">\n          <header class="bond-header">\n            <h2 class="bond__heading">${t[s].name}</h2>\n            <p class="bond__duration">Duration | <span>${t[s].duration_months} Months</span></p>\n          </header>\n          <div class="bond-type-container">\n            <div class="bond-type bond-type--maturity">\n              <div class="bond-type__interest">\n                <p class="bond-type__interest-percent">${r}%<span class="bond-type__pa"> P.A</span></p>\n                <p class="bond-type__interest-paid">Interest paid <strong>on maturity</strong></p>\n              </div>\n              <div class="bond-type__return">\n                <p class="bond-type__return-amount">£${i}</p>\n                <p class="bond-type__return-text">Expected gross return<br><i>(based on a £${currencyFormat(investAmountInput.value)} investment)</i></p>\n              </div>\n              <div class="bond-type__invest-btn-wrapper">\n                <button class="btn bond-type__invest-btn">Invest<span class="u-screen-reader-text"> in ${t[s].name} over ${t[s].duration_months} months, interest paid on maturity.</span></button>\n              </div>\n            </div>\n            <div class="bond-type bond-type--quarterly">\n              <div class="bond-type__interest">\n                <p class="bond-type__interest-percent">${a}%<span class="bond-type__pa"> P.A</span></p>\n                <p class="bond-type__interest-paid">Interest paid <strong>quarterly</strong></p>\n              </div>\n              <div class="bond-type__return">\n                <p class="bond-type__return-amount">£${u}</p>\n                <p class="bond-type__return-text">Expected gross return<br><i>(based on a £${currencyFormat(investAmountInput.value)} investment)</i></p>\n              </div>\n              <div class="bond-type__invest-btn-wrapper">\n                <button class="btn bond-type__invest-btn">Invest<span class="u-screen-reader-text"> in ${t[s].name} over ${t[s].duration_months} months, interest paid quarterly.</span></button>\n              </div>\n            </div>\n          </div>\n        </div>\n        \x3c!-- END .bond --\x3e`}setTimeout((function(){var n=document.querySelectorAll(".bond");Array.prototype.slice.call(n).forEach((function(n){n.classList.add("is-loaded")}))}),100)}},n.send()}investAmountCalc.addEventListener("click",(function(n){n.preventDefault?n.preventDefault():n.returnValue=!1,investAmountInput.value?(bondsContainer.style="margin-top: 5rem;",loader(),getBonds()):alert("Please specify an investment amount.")})),investAmountInput.addEventListener("focus",focusClassToggle),investAmountInput.addEventListener("blur",focusClassToggle);