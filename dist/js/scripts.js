var investAmountWrapper=document.querySelector(".invest-amount-wrapper"),investAmountInput=document.querySelector(".invest-amount"),bondsContainer=document.querySelector(".bonds-container"),investAmountCalc=document.querySelector(".invest-amount-calc");function focusClassToggle(){investAmountWrapper.classList.toggle("invest-amount-wrapper--focus")}function currencyWithCommas(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function getBonds(){var n=new XMLHttpRequest;n.open("GET","http://165.227.229.49:8000/bonds?api_key=vNtV4nZsuMRL01sXVPzUtRnzf7L08B9O",!0),n.onload=function(){if(200==n.status){var t=JSON.parse(n.responseText),e=t.data;console.log(t.data);for(var s=100*Number(investAmountInput.value),o=0;o<e.length;o++){var r=Number(100*e[o].maturity_interest).toFixed(2),a=Number(100*e[o].quarterly_interest).toFixed(2),d=s+s*e[o].maturity_interest/12*e[o].duration_months,i=Number(d/100).toFixed(2),p=s+s*e[o].quarterly_interest/12*e[o].duration_months,u=Number(p/100).toFixed(2);bondsContainer.innerHTML+=`<div class="bond">\n          <header class="bond-header">\n            <h2 class="bond__heading">${e[o].name}</h2>\n            <p class="bond__duration">Duration | <span>${e[o].duration_months} Months</span></p>\n          </header>\n          <div class="bond-type-container">\n            <div class="bond-type bond-type--maturity">\n              <div class="bond-type__interest">\n                <p class="bond-type__interest-percent">${r}%<span class="bond-type__pa"> P.A</span></p>\n                <p class="bond-type__interest-paid">Interest paid <strong>on maturity</strong></p>\n              </div>\n              <div class="bond-type__return">\n                <p class="bond-type__return-amount">£${i}</p>\n                <p class="bond-type__return-text">Expected gross return</p>\n              </div>\n              <button class="btn bond-type__invest-btn">Invest<span class="u-screen-reader-text"> in ${e[o].name} over ${e[o].duration_months} months, interest paid on maturity.</span></button>\n            </div>\n            <div class="bond-type bond-type--quarterly">\n              <div class="bond-type__interest">\n                <p class="bond-type__interest-percent">${a}%<span class="bond-type__pa"> P.A</span></p>\n                <p class="bond-type__interest-paid">Interest paid <strong>quarterly</strong></p>\n              </div>\n              <div class="bond-type__return">\n                <p class="bond-type__return-amount">£${u}</p>\n                <p class="bond-type__return-text">Expected gross return</p>\n              </div>\n              <button class="btn bond-type__invest-btn">Invest<span class="u-screen-reader-text"> in ${e[o].name} over ${e[o].duration_months} months, interest paid quarterly.</span></button>\n            </div>\n          </div>\n        </div>\n        \x3c!-- END .bond --\x3e`}}},n.onerror=function(){console.log("Request error!")},n.send()}investAmountCalc.addEventListener("click",(function(n){n.preventDefault(),getBonds(),bondsContainer.style="margin-top: 5rem;"})),investAmountInput.addEventListener("focus",focusClassToggle),investAmountInput.addEventListener("blur",focusClassToggle);